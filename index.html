<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />
	<title>pos商户申请表</title>
	<link rel="stylesheet" type="text/css" href="css/mobilestyle.css">
	<script type="text/javascript" src="js/function.js"></script>
</head>
<body>
	<div class="wrap">
		<div class="nav">
			<div class="left" id="back"><span class="iconfont icon-back"></span></div>
			<div class="middle">
				<img src="img/image1.png">
				<span class="Name">One2paid</span>
				<span> 云到付 </span>
				<span>銀聯移動支付服务</span>
			</div>
			<div class="right" id="more"><span class="iconfont icon-more"></span></div>
		</div>
		<div class="sellerHead">
			<p>銀聯移動POS商戶申請表</p>
			<p>UnionPay Mobile POS Merchants Application</p>
		</div>
		<div class="line"></div>
		<div class="content">
			<div class="first">
				<p class="sellerHeadname">甲部: 商戶資料</p>
				<table class="firstTab" cellspacing="0" cellpadding="0">
					<tr>
						<td>商戶名稱:</td>
						<td class="inputwrap">
							<input type="text" id="bname" class="grey">
						</td>
					</tr>
					<tr class="inputwrap">
						<td>營業地址:</td>
						<td class="inputwrap">
							<input type="text" id="baddress" class="white">
						</td>
					</tr>
					<tr>
						<td>營業地址面積:</td>
						<td class="inputwrap">
							<input type="number" id="barea" class="grey">
						</td>
					</tr>
					<tr>
						<td>行業種類:  </td>
						<td class="inputwrap">
							<input type="text" id="btype" class="white">
						</td>
					</tr>
					<tr>
						<td>商業登記號碼: </td>
						<td class="inputwrap">
							<input type="text" id="bnumbers" class="grey">
						</td>
					</tr>
					<tr>
						<td>商業登記: </td>
						<td class="inputback">
							<p class="upload1">請上傳圖片</p>
							<input type="file" class="inputimg" accept="images/gif,image/jpg,image/jpeg,image/png" onchange="imgOneChange(event)">
						</td>
					</tr>
					<tr>
						<td>身份證: </td>
						<td class="inputback">
							<p class="upload2">請上傳圖片</p>
							<input type="file" class="inputimg" accept="images/gif,image/jpg,image/jpeg,image/png" onchange="imgTwoChange(event)">
						</td>
					</tr>
					<tr>
						<td>開業日期:  </td>
						<td>
							<input required type="date" id="bstartdate" style="width: 100%">
						</td>
					</tr>
					<tr>
						<td>屆滿日期: </td>
						<td>
							<input required type="date" id="enddate" style="width: 100%; background: #E7E7E7;">
						</td>
					</tr>
				</table>
			</div>

			<div class="second" style="display: none;">
				<p class="sellerHeadname">乙部: 申請人資料</p>
				<table class="firstTab" cellspacing="0" cellpadding="0">
					<tr>
						<td>稱謂:</td>
						<td class="inputwrap">
							<select class="grey" style="border: none;">
								<option>先生</option>
								<option>女士</option>
								<option>小姐</option>
							</select>
						</td>
					</tr>
					<tr>
						<td>公司負責人:</td>
						<td class="inputwrap">
							<input type="text" id="bfzname" class="white">
						</td>
					</tr>
					<tr>
						<td>聯絡電話:<br>手機號碼:</td>
						<td class="inputwrap">
							<input class="inputcon" type="number" id="bfzphone"><br>
							<input class="inputcon" type="number" id="bfzmobile">
						</td>
					</tr>
					<tr>
						<td>電郵地址:</td>
						<td class="inputwrap">
							<input type="email" id="bfzemail" class="white">
						</td>
					</tr>
					<tr>
						<td>傳真:</td>
						<td class="inputwrap">
							<input type="number" id="bfzfax" class="grey">
						</td>
					</tr>
				</table>
				<div class="line"></div>
				<table class="firstTab" cellspacing="0" cellpadding="0">
					<tr>
						<td>稱謂:</td>
						<td class="inputwrap">
							<select class="grey" style="border: none;">
								<option>先生</option>
								<option>女士</option>
								<option>小姐</option>
							</select>
						</td>
					</tr>
					<tr>
						<td>公司聯絡人:</td>
						<td class="inputwrap">
							<input type="text" id="blxname" class="white">
						</td>
					</tr>
					<tr>
						<td>聯絡電話:<br>手機號碼:</td>
						<td class="inputwrap">
							<input class="inputcon" type="number" id="blxphone"><br>
							<input class="inputcon" type="number" id="blxmobile">
						</td>
					</tr>
					<tr>
						<td>電郵地址:</td>
						<td class="inputwrap">
							<input type="email" id="blxemail" class="white">
						</td>
					</tr>
					<tr>
						<td>傳真:</td>
						<td class="inputwrap">
							<input type="number" id="blxfax" class="grey">
						</td>
					</tr>
				</table>
			</div>
			<div class="third" style="display: none;">
				<p class="sellerHeadname" >丙部: 商戶銀行資料</p>
				<table class="firstTab" cellspacing="0" cellpadding="0">
					<tr>
						<td>銀行名稱:</td>
						<td class="inputwrap">
							<input type="text" id="bbank" class="grey">
						</td>
					</tr>
					<tr>
						<td>帳戶名稱:</td>
						<td class="inputwrap">
							<input type="text" id="bbankname" class="white">
						</td>
					</tr>
					<tr>
						<td>帳戶號碼:</td>
						<td class="inputwrap">
							<input type="number" class="grey" id="bbankaccount">
						</td>
					</tr>
				</table>
			</div>
			<div class="four" style="display: none;">
				<p class="sellerHeadname">丁部: 移動POS額度和費率</p>
				<table class="firstTab" cellspacing="0" cellpadding="0">
					<tr>
						<td class="fourone">項目</td>
						<td class="fourtwo">額度和費率</td>
						<td>備注 (商戶特別需要安排)</td>
					</tr>
					<tr>
						<td class="fourone">一般本地卡交易手續費率:</td>
						<td class="fourtwo">1.8   %</td>
						<td></td>
					</tr>
					<tr>
						<td class="fourone">白金或鑽石信用卡交易手續費率 :</td>
						<td class="fourtwo">2.5   %</td>
						<td></td>
					</tr>
					<tr>
						<td class="fourone">每天額度:</td>
						<td class="fourtwo">HKD 10,000.00</td>
						<td></td>
					</tr>
					<tr>
						<td class="fourone">到帳日:</td>
						<td class="fourtwo">2  工作天</td>
						<td></td>
					</tr>
				</table>
				<div class="agreeWrap">
					<span class="agreeOne">同意</span>
				</div>
			</div>
			<div class="five" style="display: none;">
				<p class="sellerHeadname">戊部: E850移動POS機*</p>
				<table class="firstTab" cellspacing="0" cellpadding="0">
					<tr>
						<td class="fourone">月費:</td>
						<td class="fourtwo">HKD250.00 (預繳 6 個月)</td>
						<td></td>
					</tr>
					<tr>
						<td class="fourone">合約:</td>
						<td class="fourtwo">12 個月</td>
						<td></td>
					</tr>
					<tr>
						<td class="fourone">機價按金:</td>
						<td class="fourtwo">HKD 2500.00</td>
						<td>30-6-2017 前登記免按金</td>
					</tr>
					<tr>
						<td class="fourone">首次安裝費:</td>
						<td class="fourtwo">HKD 250.00</td>
						<td>30-6-2017 前登記免安裝費</td>
					</tr>
					<tr>
						<td class="fourone">中移動數據服務月費:</td>
						<td class="fourtwo">HKD 50.00</td>
						<td></td>
					</tr>
				</table>
				<div class="agreeWrap">
					<span class="agreeTwo">同意</span>
				</div>
			</div>

		</div>
		<div class="PCbtnwrap">
			<span class="PCleft">上一页</span>
			<span class="PCright">下一页</span>
		</div>
		<div class="btnwrap" style="display: none;">
			<span id="btn">提交</span>
		</div>
		<div class="footer clearfix">
			<div class="footerLeft">
				<p>
					網址: <a href="www.one2paid.com">www.one2paid.com</a> 
				</p>
				<p>
					電郵: <a href="javascript:void(0)">info@one2paid.com </a>
				</p>
			</div>
			<div class="footerRigth">
				<img src="img/image2.png">
				<img src="img/image3.png">
			</div>
		</div>
		
	</div>
</body>
<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
<script type="text/javascript">
 
	var pagecount = 0;
	var starttime = '';
	var endtime = '';
	// 返回上一页
	$("#back").click(function(){
		$("#more").css('display',"inline-block");
		$(".btnwrap").css('display','none');
		$(".wrap").css('background',"white");
		for (var i = 0; i < $(".content>div").length; i++) {
			var index = i;
			if(pagecount < 1){
				return;
			}else{
				if($(".content>div").eq(index).css('display') == 'block'){
					$(".content>div").eq(index).css('display',"none");
					$(".content>div").eq(index).prev().css('display',"block");
					pagecount--;
					if (!pagecount) {
						$('#back').css('display','none')
					}
					return;
				}
			}
		}
	})

	// 下一页
	$("#more").click(function(){
		switch (pagecount){
			case 0:
				if(!bname.value || !baddress.value || !barea.value || !btype.value || !bnumbers.value || !bstartdate.value || !enddate.value || !picOneurl || !picTwourl){
					if(!bname.value){
						alert('请填写商戶名稱！');
						bname.focus();
						return;
					}else if(!baddress.value){
						alert('请填写營業地址！');
						baddress.focus();
						return;
					}else if(!barea.value){
						alert('请填写營業地址面積！');
						barea.focus();
						return;
					}else if(!btype.value){
						alert('请填写行業種類！');
						btype.focus();
						return;
					}else if(!bnumbers.value){
						alert('请填写商業登記號碼！');
						bnumbers.focus();
						return;
					}else if(!bstartdate.value){
						alert('请选择開業日期！');
						bstartdate.focus();
						return;
					}else if(!enddate.value){
						alert('请选择屆滿日期！');
						enddate.focus();
						return;
					}else if(!picOneurl.value || !picTwourl.value){
						alert('请上传商业登记和身份证');
						return;
					}
				}else{
					starttime = bstartdate.value.replace(/-/g,"/");
					endtime = enddate.value.replace(/-/g,"/");
					var datebol = new Date(starttime) < new Date(endtime);
					if(!datebol){
						alert('屆滿日期需大于開業日期')
					}else{
						Jumppage(pagecount);
					}
				}
				break;
			case 1:
				if(!bfzname.value || !bfzphone.value || !bfzmobile.value || !bfzemail.value || !blxname.value || !blxphone.value || !blxmobile.value || !blxemail.value){
					if(!bfzname.value){
						alert('请填写公司負責人！');
						bfzname.focus();
						return;
					}else if(!bfzphone.value){
						alert('请填写負責人聯絡電話！');
						bfzphone.focus();
						return;
					}else if(!bfzmobile.value){
						alert('请填写負責人手機號碼！');
						bfzmobile.focus();
						return;
					}else if(!bfzemail.value){
						alert('请填写負責人電郵地址！');
						bfzemail.focus();
						return;
					}else if(!blxname.value){
						alert('请填写聯絡人！');
						blxname.focus();
						return;
					}else if(!blxphone.value){
						alert('请填写聯絡人聯絡電話！');
						blxphone.focus();
						return;
					}else if(!blxmobile.value){
						alert('请填写聯絡人手機號碼！');
						blxmobile.focus();
						return;
					}else if(!blxemail.value){
						alert('请填写聯絡人電郵地址！');
						blxemail.focus();
						return;
					}
				}else{
					Jumppage(pagecount);
				}
				break;
			case 2:
				if(!bbank.value || !bbankname.value || !bbankaccount.value){
					if(!bbank.value){
						alert('请填写商户银行！');
						bbank.focus();
						return;
					}else if(!bbankname.value){
						alert('请填写帐户名称！');
						bbankname.focus();
						return;
					}else if(!bbankaccount.value){
						alert('请填写帐户号码！');
						bbankaccount.focus();
						return;
					}
				}else{
					Jumppage(pagecount);
				}
				break;
			case 3:
				if(Onebol){
					alert("请同意 移動POS額度和費率！");
				}else{
					Jumppage(pagecount);
				}
				break;
		}
	})
	function Jumppage(num){
		if(!pagecount){
			$("#back").css('display',"inline-block")
		}
		$(".content>div").eq(num).css('display',"none");
		$(".content>div").eq(num).next().css('display',"block");
		if(pagecount>2){
			$("#more").css('display',"none");
			$(".btnwrap").css('display',"block");
			$(".wrap").css('background',"#E7E7E7");
			pagecount=4
		}else{
			pagecount++;
		}
	}

	// agree切换样式
	var Onebol = true;
	$('.agreeOne').click(function(){
		if(Onebol){
			$(this).addClass("active");
			Onebol = false;
		}else{
			$(this).removeClass("active");
			Onebol = true;
		}
	})
	var Twobol = true;
	$('.agreeTwo').click(function(){
		if(Twobol){
			$(this).addClass("active");
			Twobol = false;
		}else{
			$(this).removeClass("active");
			Twobol = true;
		}
	})
	

	var bname = document.getElementById("bname");
	var baddress = document.getElementById("baddress");
	var barea = document.getElementById("barea");
	var btype = document.getElementById("btype");
	var bnumbers = document.getElementById("bnumbers");
	var bstartdate = document.getElementById("bstartdate");
	var enddate = document.getElementById("enddate");
	var bfzname = document.getElementById("bfzname");
	var bfzphone = document.getElementById("bfzphone");
	var bfzmobile = document.getElementById("bfzmobile");
	var bfzemail = document.getElementById("bfzemail");
	var bfzfax = document.getElementById("bfzfax");
	var blxname = document.getElementById("blxname");
	var blxphone = document.getElementById("blxphone");
	var blxmobile = document.getElementById("blxmobile");
	var blxemail = document.getElementById("blxemail");
	var blxfax = document.getElementById("blxfax");
	var bbank = document.getElementById("bbank");
	var bbankname = document.getElementById("bbankname");
	var bbankaccount = document.getElementById("bbankaccount");

	var btn = document.getElementById("btn");
	var btnbol = true;
	btn.onclick = function(){
		if(!btnbol){
			alert('请勿重复注册！')
			return;
		}
		if(Twobol){
			alert("请同意 E850移動POS機!")
			return;
		}else{
			$.ajax({  
		        url: "http://47.90.60.17:80/im/user/registPosBusiness",              //请求地址
		        type: "POST",                       //请求方式
		        data: { 
		        	bname: bname.value,
		        	baddress: baddress.value,
		        	barea: barea.value,
		        	btype: btype.value,
		        	bnumbers: bnumbers.value,
		        	bstartdate: starttime,
		        	enddate: endtime,
		        	bfzname: bfzname.value,
		        	bfzphone: bfzphone.value,
		        	bfzmobile: bfzmobile.value,
		        	bfzemail: bfzemail.value,
		        	bfzfax: bfzfax.value || '',
		        	blxname: blxname.value,
		        	blxphone: blxphone.value,
		        	blxmobile: blxmobile.value,
		        	blxemail: blxemail.value,
		        	blxfax: blxfax.value || '',
		        	bmarkb: "",
		        	bmarkz: "",
		        	bed: '',
		        	bdz: '',
		        	bbank: bbank.value,
		        	bbankname: bbankname.value,
		        	bbankaccount: bbankaccount.value,
		        	dengji:picOneurl,
		        	sfz:picTwourl
		        },
		        dataType: "json",
		        cache:true, 
		        success: function (response, xml) {
		            alert("注册成功！");
		            btnbol = false;
		            $('#btn').css({
		            	'background':'#AEACAC'
		            })
		        },
		        fail: function (status) {
		            alert("注册失败！请重试")
		        }
		    });
		}
	}
	Date.prototype.Format = function (fmt) { //author: meizz 
	    var o = {
	        "M+": this.getMonth() + 1, //月份 
	        "d+": this.getDate(), //日 
	        "h+": this.getHours(), //小时 
	        "m+": this.getMinutes(), //分 
	        "s+": this.getSeconds(), //秒 
	        "q+": Math.floor((this.getMonth() + 3) / 3), //季度 
	        "S": this.getMilliseconds() //毫秒 
	    };
	    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
	    for (var k in o)
	    if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
	    return fmt;
	}

	if(jumpPc){
		$('.PCbtnwrap').css('display','block');
		$('#more').css('display','none');
		$('#back').css('display','none');
		$('.wrap').css({
			'width':'75%',
			'margin':'0 auto',
			'border': '1px solid #E7E7E7'
		});
		$('.nav').css({
			'width':'75%',
			'margin':'0 12.5%',
		});
		$('.footer').css({
			'width':'75%',
			'margin':'0 12.5%',
		})
	}else{
		$('.PCbtnwrap').css('display','none');
	}
	
	$(".PCleft").click(function(){
		$(".PCright").css('display',"inline-block");
		$(".btnwrap").css('display','none');
		for (var i = 0; i < $(".content>div").length; i++) {
			var index = i;
			if(pagecount < 1){
				return;
			}else{
				if($(".content>div").eq(index).css('display') == 'block'){
					$(".content>div").eq(index).css('display',"none");
					$(".content>div").eq(index).prev().css('display',"block");
					pagecount--;
					if (!pagecount) {
						$('.PCleft').css('display','none')
					}
					return;
				}
			}
		}
	})
	$('.PCright').click(function(){
		switch (pagecount){
			case 0:
				if(!bname.value || !baddress.value || !barea.value || !btype.value || !bnumbers.value || !bstartdate.value || !enddate.value || !picOneurl || !picTwourl){
					if(!bname.value){
						alert('请填写商戶名稱！');
						bname.focus();
						return;
					}else if(!baddress.value){
						alert('请填写營業地址！');
						baddress.focus();
						return;
					}else if(!barea.value){
						alert('请填写營業地址面積！');
						barea.focus();
						return;
					}else if(!btype.value){
						alert('请填写行業種類！');
						btype.focus();
						return;
					}else if(!bnumbers.value){
						alert('请填写商業登記號碼！');
						bnumbers.focus();
						return;
					}else if(!bstartdate.value){
						alert('请选择開業日期！');
						bstartdate.focus();
						return;
					}else if(!enddate.value){
						alert('请选择屆滿日期！');
						enddate.focus();
						return;
					}else if(!picOneurl.value || !picTwourl.value){
						alert('请上传商业登记和身份证');
						return;
					}
				}else{
					starttime = bstartdate.value.replace(/-/g,"/");
					endtime = enddate.value.replace(/-/g,"/");
					var datebol = new Date(starttime) < new Date(endtime);
					if(!datebol){
						alert('屆滿日期需大于開業日期')
					}else{
						PCjumppage(pagecount);
					}
				}
				break;
			case 1:
				if(!bfzname.value || !bfzphone.value || !bfzmobile.value || !bfzemail.value || !blxname.value || !blxphone.value || !blxmobile.value || !blxemail.value){
					if(!bfzname.value){
						alert('请填写公司負責人！');
						bfzname.focus();
						return;
					}else if(!bfzphone.value){
						alert('请填写負責人聯絡電話！');
						bfzphone.focus();
						return;
					}else if(!bfzmobile.value){
						alert('请填写負責人手機號碼！');
						bfzmobile.focus();
						return;
					}else if(!bfzemail.value){
						alert('请填写負責人電郵地址！');
						bfzemail.focus();
						return;
					}else if(!blxname.value){
						alert('请填写聯絡人！');
						blxname.focus();
						return;
					}else if(!blxphone.value){
						alert('请填写聯絡人聯絡電話！');
						blxphone.focus();
						return;
					}else if(!blxmobile.value){
						alert('请填写聯絡人手機號碼！');
						blxmobile.focus();
						return;
					}else if(!blxemail.value){
						alert('请填写聯絡人電郵地址！');
						blxemail.focus();
						return;
					}
				}else{
					PCjumppage(pagecount);
				}
				break;
			case 2:
				if(!bbank.value || !bbankname.value || !bbankaccount.value){
					if(!bbank.value){
						alert('请填写商户银行！');
						bbank.focus();
						return;
					}else if(!bbankname.value){
						alert('请填写帐户名称！');
						bbankname.focus();
						return;
					}else if(!bbankaccount.value){
						alert('请填写帐户号码！');
						bbankaccount.focus();
						return;
					}
				}else{
					PCjumppage(pagecount);
				}
				break;
			case 3:
				if(Onebol){
					alert("请同意 移動POS額度和費率！");
				}else{
					PCjumppage(pagecount);
				}
				break;
		}
	})
	function PCjumppage(num){
		if(!pagecount){
			$(".PCleft").css('display',"inline-block")
		}
		$(".content>div").eq(num).css('display',"none");
		$(".content>div").eq(num).next().css('display',"block");
		if(pagecount>2){
			$(".PCright").css('display',"none");
			$(".btnwrap").css({
				'display':"block",
				'position':"absolute",
				'margin-bottom':'0rem',
				'bottom':'.92rem'
			});
			$(".wrap").css('background',"white");
			pagecount=4
		}else{
			pagecount++;
		}
	}
	// 上传图片
	var picOneurl = '';
	var picTwourl = '';
	function imgOneChange(e) {
	    var reader = new FileReader();
	    reader.onload = (function (file) {
	        return function (e) {
	            picOneurl = this.result;
	            if(picOneurl){
	            	$('.upload1').text('上傳成功！')
	            }else{
	            	alert('上傳失敗，請重試！')
	            }
	        };
	    })(e.target.files[0]);
	    reader.readAsDataURL(e.target.files[0]);
	};
	function imgTwoChange(e) {
	    var reader = new FileReader();
	    reader.onload = (function (file) {
	        return function (e) {
	            picTwourl = this.result;
	            // console.info(picTwourl)
	            if(picOneurl){
	            	$('.upload2').text('上傳成功！')
	            }else{
	            	alert('上傳失敗，請重試！')
	            }
	        };
	    })(e.target.files[0]);
	    reader.readAsDataURL(e.target.files[0]);
	};
</script>
</html>